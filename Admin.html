<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UNAMUNO Admin</title>

  <script src="https://unpkg.com/@supabase/supabase-js"></script>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="notifications" class="notifications" aria-live="polite"></div>

  <header>
    <img id="site-logo-admin" src="" alt="Logo" />
    <h1 id="admin-title">UNAMUNO — Admin</h1>
  </header>

  <main>
    <section id="admin-auth-section">
      <h2>🔐 Admin Sign In</h2>
      <input id="admin-secret-input" type="password" placeholder="Enter admin secret" />
      <div style="display:flex;gap:8px;">
        <button id="admin-signin-btn" class="btn">Sign In</button>
        <button id="admin-signout-btn" class="ghost small hidden">Sign Out</button>
      </div>
      <p class="muted">Admin access uses an <strong>admin secret</strong> stored in your site_settings. Change it after first login.</p>
    </section>

    <section id="admin-controls" class="hidden">
      <h2>🛠️ Admin Controls</h2>

      <!-- Site settings -->
      <div class="card">
        <h3>Site Settings</h3>
        <input id="setting-title" type="text" placeholder="Site title" />
        <input id="setting-description" type="text" placeholder="Site description" />
        <input id="setting-accent" type="text" placeholder="Accent color (e.g. #16a34a)" />
        <input id="setting-logo" type="text" placeholder="Logo URL" />
        <div style="display:flex;gap:8px;margin-top:8px;">
          <button id="save-settings-btn" class="btn">Save Settings</button>
        </div>
      </div>

      <!-- Posts management -->
      <div class="card">
        <h3>Posts</h3>
        <div id="admin-posts">Loading posts...</div>
      </div>

      <!-- Calendar management -->
      <div class="card">
        <h3>Calendar Events</h3>
        <div id="admin-calendar-controls">
          <input id="admin-event-date" type="date" />
          <input id="admin-event-title" type="text" placeholder="Event title" />
          <textarea id="admin-event-note" placeholder="Note (optional)"></textarea>
          <div style="display:flex;gap:8px;margin-top:8px;">
            <button id="admin-create-event-btn" class="btn">Create Event</button>
          </div>
        </div>
        <div id="admin-calendar">Loading events...</div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <a href="index.html">Back to site</a>
  </footer>

  <script src="admin.js"></script>
</body>
</html>
